2009-09-30  Jim Meyering  <meyering@redhat.com>

	version 1.3.13
	* NEWS: Record release date.

	build: update gnulib submodule to latest

	maint: update bootstrap script
	* bootstrap (with_gettext): Update from coreutils.

	maint: pull in two release-related modules from gnulib
	* bootstrap.conf (gnulib_modules): Add announce-gen and gnupload.

	build: use more gnulib modules for better POSIX compliance
	* bootstrap.conf (gnulib_modules): Add modules exposed via
	make CFLAGS=-DGNULIB_POSIXCHECK 2>&1 \
	|perl -lne '/.* use gnulib module (\S+).*/ and print $1' \
	|sort |uniq -c|sort -nr
	Add these: calloc close fclose fprintf-posix lstat malloc
	perror printf-posix realloc

2009-09-30  Karl Berry  <karl@freefriends.org>

	doc: update to FDL 1.3, minor clean-up
	* NEWS, README, TODO: Update FDL s/1.2/1.3/.

2009-09-28  Karl Berry  <karl@freefriends.org>

	doc: update gzip.texi
	* doc/gzip.texi: FDL 1.3+
	Consistently (de)capitalize section names.
	"User's" is not correct; seems best to simplify the title.
	Throw in some "GNU"'s.
	Make direntries be what we actually want.
	Detabify.

2009-09-26  Jim Meyering  <meyering@redhat.com>

	maint: temporarily exempt failing syntax-check tests
	* cfg.mk (local-checks-to-skip): Add the list of currently-failing
	tests, to exempt them from "make syntax-check".

	gzip: don't use an uninitialized file descriptor
	gzip interprets an argument of "-" as indicating stdin, but when
	"-" is not the first name on the command line, it doesn't work.
	* gzip.c (treat_stdin): Initialize "ifd".
	Patch and fine description by Lasse Collin in
	http://www.mail-archive.com/bug-gzip@gnu.org/msg00213.html
	* Makefile.am (check-local): Exercise the fix.  Based on the above.
	* NEWS (Bug fixes): Mention this.

	maint: use a git submodule for gnulib
	* .gitmodules: New file, to track gnulib.
	* gnulib: New file, created by running this:
	git submodule add git://git.sv.gnu.org/gnulib.git gnulib

	maint: update existing copyright year lists to include 2009
	* bootstrap.conf (gnulib_modules): Add update-copyright.

	maint: include <config.h> first in many files

	maint: avoid another "make syntax-check" failure
	* lib/Makefile.am (match.$(OBJEXT)): Use $(ASCPPPOST), not @ASCPPPOST@.

	maint: remove RCS $Id$ variables and comments

	maint: change spelling in comments: s/filesystem/file system/

	maint: don't use "the the"
	* msdos/doturboc.bat: s/the the/the/.

	maint: remove trailing blanks

	maint: remove useless if-before-free tests
	* gzip.c (do_exit): Remove useless if-before-free tests.

	maint: remove useless casts to avoid "make syntax-check" failures
	* gzip.c (do_exit): Remove anachronistic cast.
	* inflate.c (huft_free): Likewise.
	* util.c (add_envopt): Likewise.
	* vms/vms.c (vms_expand_args): Likewise.

	maint: new file: .prev-version
	* .prev-version: New file, to record previous version number.

2009-09-06  Jim Meyering  <meyering@redhat.com>

	build: avoid spurious warnings from clang
	* gzip.h (gzip_error): Declare with ATTRIBUTE_NORETURN.

	maint: update build-from-scratch infrastructure
	* bootstrap: Modernize.
	* bootstrap.conf: Modernize.
	* cfg.mk: New file.

2009-08-18  Jim Meyering  <meyering@redhat.com>

	inflate: avoid a leak on a error path
	* inflate.c (inflate_dynamic): Don't leak

	maint: ignore a few generated files
	* lib/.gitignore: ignore more generated files.

	tests: add a test for just-fixed bug
	* tests/hufts-segv.gz: New file, from bug report.
	* Makefile.am (EXTRA_DIST): Add tests/hufts-segv.gz.
	(check-local): Exercise the bug.

	tests: don't misinterpret a failing test as successful
	* Makefile.am (check-local): Exit "1" upon failure, not 0.

2009-08-18  Thiemo Nagel  <thiemo.nagel@ph.tum.de>

	avoid creating an undersized buffer for the hufts table
	A malformed input file can cause gzip to crash with a segmentation
	violation or hang in an endless loop.
	Reported in <http://bugs.debian.org/507263>.
	* NEWS (Bug fixes): Mention it.

2009-08-18  Jim Meyering  <meyering@redhat.com>

	avoid silent data loss e.g., on NFS, due to unchecked close of stdout
	* gzip.c: Include "closein.h".
	(main): Use atexit (close_stdin);
	* bootstrap.conf (gnulib_modules): Add closein.
	Prompted by Mark Kidwell's report and patch in
	http://bugs.debian.org/538187
	* NEWS (Bug fixes): Mention it.
	* */.gitignore: Update.

	build: require automake-1.11 and produce xz-compressed tarballs, too
	* configure.ac: Require automake-1.11.  Use the dist-xz option.

	build: avoid non-srcdir build failure
	* Makefile.am (gzip.doc.gz): Use $(srcdir)/gzip.doc, not gzip.doc.
	Don't redirect directly to $@.  Use $(AM_V_GEN).
	(gzip.doc, .in): Don't redirect directly to $@.  Use $(AM_V_GEN).
	* NEWS: Add template header for upcoming release.

	build: enable git-version-gen, automake silent rules, generate ChangeLog
	* configure.ac (AC_INIT): Use git-version-gen.
	Use AM_SILENT_RULES([yes]).
	(AM_INIT_AUTOMAKE): Drop gnits; conflicts with git-version-gen versions.
	* bootstrap.conf (gnulib_modules): Use getopt-gnu
	Ensure ChangeLog exists, for automake.
	rather than obsolete "getopt" module.
	Add gitlog-to-changelog.
	Add git-version-gen.
	Add gnu-make, gnumakefile and maintainer-makefile.
	* Makefile.am (dist-hook, gen-ChangeLog): New rules, to generate
	ChangeLog and insert it into the distribution tarball.
	(EXTRA_DIST): Add ChangeLog-2007.

	maint: retire the last VC'd ChangeLog file
	* ChangeLog-2007: Rename from ChangeLog.
	From now on, the ChangeLog file will be generated automatically
	from commit logs.

	maint: rename .cvsignore files to .gitignore
	* .gitignore: Renamed from .cvsignore.
	* doc/.gitignore: Likewise.
	* lib/.gitignore: Likewise.
	* m4/.gitignore: Likewise.
